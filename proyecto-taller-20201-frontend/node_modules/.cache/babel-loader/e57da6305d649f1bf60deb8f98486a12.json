{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\TALLER DESARROLLO WEB\\\\proyecto semestral\\\\proyecto-taller-20202\\\\src\\\\views\\\\Plibros.js\";\nimport React, { useState, useEffect } from 'react';\nimport MaterialTable from 'material-datatable';\nimport axios from 'axios';\nimport { useForm } from 'react-hook-form';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport swal from 'sweetalert';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Popup from './Popup';\nimport Usuario from './Pusuario';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: '25ch'\n    }\n  }\n}));\nexport default function MaterialTable1() {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const classes = useStyles();\n  const [item, setItem] = useState([]);\n  const [openPopup, setOpenPopup] = useState(false);\n  const columns = [{\n    name: \"ID Libro\",\n    field: \"id_libro\",\n    options: {\n      filter: true,\n      sort: true\n    }\n  }, {\n    name: \"Titulo\",\n    field: \"titulo\",\n    options: {\n      filter: true,\n      sort: false\n    }\n  }, {\n    name: 'Autor',\n    field: 'autor'\n  }, {\n    name: 'Idioma',\n    field: 'idioma'\n  }, {\n    name: 'contador',\n    field: 'count'\n  }, {\n    name: \"Seleccionar\",\n    options: {\n      headerNoWrap: true,\n      customBodyRender: (item, tablemeta, update) => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          variant: \"outlined\",\n          className: \"btnblock\",\n          onClick: () => handleSelecciondelete(item._id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(DeleteIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(IconButton, {\n          variant: \"outlined\",\n          className: \"btnblock\",\n          onClick: () => setOpenPopup(true),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(EditIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(Popup, {\n          openPopup: openPopup,\n          setOpenPopup: setOpenPopup,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Usuario, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }\n        })));\n      }\n    }\n  }];\n\n  const handleSelecciondelete = data => {\n    axios.delete(`http://localhost:5000/api/Eliminarlibro/${data}`).then(response => {\n      console.log(response.data);\n      swal({\n        title: \"Datos Eliminados\",\n        text: \"El libro se a eliminado de la biblioteca\",\n        icon: \"success\",\n        button: \"Continuar\"\n      });\n    }).catch(error => {\n      console.log(error);\n      console.log(data);\n    });\n  };\n\n  const onSubmit = data => {\n    axios.post(\"http://localhost:5000/api/guardarLibro\", data).then(response => {\n      console.log(response.data);\n      swal({\n        title: \"Datos Guardados\",\n        text: \"El libro se a guardado en la biblioteca\",\n        icon: \"success\",\n        button: \"Continuar\"\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const onSubmit2 = data => {\n    axios.get(\"http://localhost:5000/api/buscarlibro\", {\n      titulo: data\n    }).then(response => {\n      console.log(response.data);\n      swal({\n        title: \"Datos Guardados\",\n        text: \"El libro se a guardado en la biblioteca\",\n        icon: \"success\",\n        button: \"Continuar\"\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    cargar();\n  }, []);\n\n  const cargar = async () => {\n    const {\n      data\n    } = await axios.get(\"http://localhost:5000/api/todosLibros\");\n    setItem(data.libro);\n    return null;\n  };\n\n  console.log(errors);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 10\n    }\n  }, \"Ingreso de Libros\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    label: \"Libro ID\",\n    variant: \"outlined\",\n    name: \"id_libro\",\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic1\",\n    label: \"Titulo del libro\",\n    variant: \"outlined\",\n    name: \"titulo\",\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic2\",\n    label: \"Autor del libro\",\n    variant: \"outlined\",\n    name: \"autor\",\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic3\",\n    label: \"Idioma\",\n    variant: \"outlined\",\n    name: \"idioma\",\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, \"Enviar\")), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, \"Biblioteca Virtual\"), /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Libros guardados\",\n    columns: columns,\n    data: item,\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          setItem(prevState => {\n            const data = [...prevState.data];\n            data.push(newData);\n            return { ...prevState,\n              data\n            };\n          });\n        }, 600);\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n\n          if (oldData) {\n            setItem(prevState => {\n              const data = [...prevState.data];\n              data[data.indexOf(oldData)] = newData;\n              return { ...prevState,\n                data\n              };\n            });\n          }\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          setItem(prevState => {\n            const data = [...prevState.data];\n            data.splice(data.indexOf(oldData), 1);\n            return { ...prevState,\n              data\n            };\n          });\n        }, 600);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit2),\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    label: \"Titulo Libro\",\n    variant: \"outlined\",\n    name: \"titulo\",\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, \"Enviar\")));\n}","map":{"version":3,"sources":["C:/xampp/htdocs/TALLER DESARROLLO WEB/proyecto semestral/proyecto-taller-20202/src/views/Plibros.js"],"names":["React","useState","useEffect","MaterialTable","axios","useForm","TextField","makeStyles","Button","swal","IconButton","DeleteIcon","EditIcon","Popup","Usuario","useStyles","theme","root","margin","spacing","width","MaterialTable1","register","handleSubmit","errors","classes","item","setItem","openPopup","setOpenPopup","columns","name","field","options","filter","sort","headerNoWrap","customBodyRender","tablemeta","update","handleSelecciondelete","_id","data","delete","then","response","console","log","title","text","icon","button","catch","error","onSubmit","post","onSubmit2","get","titulo","cargar","libro","onRowAdd","newData","Promise","resolve","setTimeout","prevState","push","onRowUpdate","oldData","indexOf","onRowDelete","splice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport MaterialTable from 'material-datatable';\r\nimport axios from 'axios';\r\nimport { useForm } from 'react-hook-form';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport swal from 'sweetalert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Popup from './Popup';\r\nimport Usuario from './Pusuario'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n        width: '25ch',\r\n      },\r\n    },\r\n  }));\r\n\r\n\r\nexport default function MaterialTable1() {\r\n    \r\n    const { register, handleSubmit, errors } = useForm();\r\n    const classes = useStyles();\r\n    const [item, setItem] = useState([]);\r\n    const [openPopup, setOpenPopup] = useState(false);\r\n\r\n    const columns = [\r\n      {\r\n       name: \"ID Libro\",\r\n       field: \"id_libro\",\r\n       options: {\r\n        filter: true,\r\n        sort: true,\r\n       }\r\n      },\r\n      {\r\n       name: \"Titulo\",\r\n       field: \"titulo\",\r\n       options: {\r\n        filter: true,\r\n        sort: false,\r\n       }\r\n      },\r\n      {\r\n        name: 'Autor', \r\n        field: 'autor'\r\n      },\r\n      {\r\n        name: 'Idioma', \r\n        field: 'idioma'\r\n      },\r\n      {\r\n        name: 'contador', \r\n        field: 'count'\r\n      },{\r\n        name: \"Seleccionar\",\r\n        options: {\r\n            headerNoWrap: true,\r\n            customBodyRender: (item, tablemeta, update) => {\r\n                return (\r\n                    <div>\r\n                    <IconButton\r\n                        variant='outlined'\r\n\r\n                        className=\"btnblock\"\r\n                        onClick={() => handleSelecciondelete(item._id)}\r\n                    >\r\n                      <DeleteIcon/>\r\n                    </IconButton>\r\n                    <IconButton\r\n                        variant='outlined'\r\n\r\n                        className=\"btnblock\"\r\n                        onClick={() => setOpenPopup(true)}\r\n                    >\r\n                      <EditIcon/>\r\n                    </IconButton>\r\n                      <Popup\r\n                        openPopup ={openPopup}\r\n                        setOpenPopup ={setOpenPopup}\r\n                      >\r\n                        <Usuario/>\r\n                      </Popup>\r\n                    </div>\r\n                );\r\n            },\r\n        },\r\n    },\r\n    \r\n     ];\r\n     \r\n\r\n    const handleSelecciondelete = (data) => {\r\n      axios.delete(`http://localhost:5000/api/Eliminarlibro/${data}`)\r\n      .then(\r\n        (response)=>{\r\n          console.log(response.data);\r\n          swal({ \r\n              title: \"Datos Eliminados\",\r\n              text: \"El libro se a eliminado de la biblioteca\",\r\n              icon: \"success\",\r\n              button: \"Continuar\",\r\n          });\r\n        }\r\n      ).catch((error) => {\r\n        console.log(error);\r\n        console.log(data);\r\n      })\r\n    }\r\n    \r\n  \r\n    const onSubmit = data => {\r\n    axios\r\n    .post(\"http://localhost:5000/api/guardarLibro\", data)\r\n    .then(\r\n      (response)=>{\r\n        console.log(response.data);\r\n        swal({ \r\n            title: \"Datos Guardados\",\r\n            text: \"El libro se a guardado en la biblioteca\",\r\n            icon: \"success\",\r\n            button: \"Continuar\",\r\n        });\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n  \r\n\r\n  const onSubmit2 = data => {\r\n    axios\r\n    .get(\"http://localhost:5000/api/buscarlibro\",{\r\n          titulo:data\r\n    })\r\n    .then(\r\n      (response)=>{\r\n        console.log(response.data);\r\n        swal({ \r\n            title: \"Datos Guardados\",\r\n            text: \"El libro se a guardado en la biblioteca\",\r\n            icon: \"success\",\r\n            button: \"Continuar\",\r\n        });\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n  \r\n\r\n  useEffect(() => {\r\n    cargar();\r\n\r\n  }, []);\r\n\r\n\r\n  const cargar = async() =>{\r\n    const { data } = await axios.get(\"http://localhost:5000/api/todosLibros\");\r\n\r\n    setItem(data.libro);\r\n    return null;\r\n  }\r\n  console.log(errors);\r\n  return (\r\n\r\n     <div> \r\n         <h1>Ingreso de Libros</h1>\r\n    <form onSubmit={handleSubmit(onSubmit)} className={classes.root}>\r\n\r\n      <TextField id=\"outlined-basic\" label=\"Libro ID\" variant=\"outlined\" name=\"id_libro\" inputRef={register} />\r\n      <TextField id=\"outlined-basic1\" label=\"Titulo del libro\" variant=\"outlined\" name=\"titulo\" inputRef={register} />\r\n      <TextField id=\"outlined-basic2\" label=\"Autor del libro\" variant=\"outlined\" name=\"autor\" inputRef={register} />\r\n      <TextField id=\"outlined-basic3\" label=\"Idioma\" variant=\"outlined\" name=\"idioma\" inputRef={register} />\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.button}\r\n        type=\"submit\"\r\n      >\r\n        Enviar\r\n      </Button>\r\n    </form>\r\n        <h1>Biblioteca Virtual</h1>\r\n        <MaterialTable\r\n        title=\"Libros guardados\"\r\n        columns={columns}\r\n        data={item}\r\n        editable={{\r\n            onRowAdd: (newData) =>\r\n            new Promise((resolve) => {\r\n                setTimeout(() => {\r\n                    resolve();\r\n                    setItem((prevState) => {\r\n                    const data = [...prevState.data];\r\n                    data.push(newData);\r\n                    return { ...prevState, data };\r\n                });\r\n                }, 600);\r\n            }),\r\n            onRowUpdate: (newData, oldData) =>\r\n            new Promise((resolve) => {\r\n                setTimeout(() => {\r\n                resolve();\r\n                if (oldData) {\r\n                    setItem((prevState) => {\r\n                    const data = [...prevState.data];\r\n                    data[data.indexOf(oldData)] = newData;\r\n                    return { ...prevState, data };\r\n                    });\r\n                }\r\n                }, 600);\r\n            }),\r\n            onRowDelete: (oldData) =>\r\n            new Promise((resolve) => {\r\n                setTimeout(() => {\r\n                resolve();\r\n                setItem((prevState) => {\r\n                    const data = [...prevState.data];\r\n                    data.splice(data.indexOf(oldData), 1);\r\n                    return { ...prevState, data };\r\n                });\r\n                }, 600);\r\n            }),\r\n        }}\r\n        />\r\n\r\n        <form onSubmit={handleSubmit(onSubmit2)} className={classes.root}>\r\n\r\n        <TextField id=\"outlined-basic\" label=\"Titulo Libro\" variant=\"outlined\" name=\"titulo\" inputRef={register} />\r\n      <span>{}</span>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}\r\n          type=\"submit\"\r\n        >\r\n          Enviar\r\n        </Button>\r\n        </form>\r\n    </div>   \r\n\r\n    );\r\n\r\n}"]},"metadata":{},"sourceType":"module"}